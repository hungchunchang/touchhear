{% extends "base.html" %}
{% block title %}TouchHear - A4 互動檢測{% endblock %}

{% block content %}
<div class="container">
    <h1>TouchHear</h1>
    <img src="/video_feed" width="640" height="480" alt="視頻流">

    <!-- 即時狀態顯示 -->
    <div class="status">
        <h3>檢測狀態</h3>
        <div id="detection-status">
            <div class="mb-2">
                <span id="board-status" class="badge bg-secondary">棋盤: 檢測中...</span>
            </div>
            <div class="mb-2">
                <span id="hand-status" class="badge bg-secondary">手部: 檢測中...</span>
            </div>
            <div class="mb-2">
                <span id="depth-status" class="badge bg-secondary">深度: 校準中...</span>
            </div>
            <div class="mb-2">
                <span id="touch-status" class="badge bg-secondary">接觸: 無</span>
            </div>
        </div>
        
        <div id="detailed-info" style="margin-top: 15px;">
            <div id="calibration-progress"></div>
            <div id="finger-positions"></div>
        </div>
    </div>

    <div class="instructions">
        <h3>使用說明：</h3>
        <ol>
            <li>列印 A4 模板（包含四個角落的 ArUco 標記）</li>
            <li>將 A4 紙平放在攝影機前，確保標記清晰可見</li>
            <li>等待深度校準完成（約3-5秒）</li>
            <li>用食指指向或觸碰 A4 紙上的位置</li>
            <li>觀察 🔴 TOUCH、🟠 HOVER、🔵 FAR 狀態變化</li>
        </ol>
    </div>

    <div class="marker-info">
        <strong>ArUco 標記說明：</strong><br>
        • ID0 (左上角) • ID1 (右上角) • ID2 (右下角) • ID3 (左下角)<br>
        至少需要檢測到 3 個標記才能進行座標計算
    </div>

    <div class="status">
        <h3>深度檢測技術</h3>
        <ul>
            <li><strong>🔴 TOUCH:</strong> 手指接觸紙面 (&lt;30mm)</li>
            <li><strong>🟠 HOVER:</strong> 手指懸停 (30-80mm)</li>
            <li><strong>🔵 FAR:</strong> 手指距離較遠 (&gt;80mm)</li>
            <li><strong>自動校準：</strong>基於 ArUco 標記的紙面深度基準</li>
            <li><strong>精確座標：</strong>A4 紙面座標系統 (mm)</li>
        </ul>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/main.js') }}"></script>
{% endblock %}