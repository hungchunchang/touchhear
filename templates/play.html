# HTML Templates

## templates/base.html
```html
<!DOCTYPE html>
<html lang="zh-TW">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}A4 Interactive Board{% endblock %}</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="{{ url_for('static', filename='css/style.css') }}" rel="stylesheet">
</head>

<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
        <div class="container">
            <a class="navbar-brand" href="{{ url_for('index') }}">
                <i class="fas fa-hand-pointer"></i> A4 Interactive Board
            </a>
            <div class="navbar-nav">
                <a class="nav-link" href="{{ url_for('file_manager_page') }}">專案管理</a>
            </div>
        </div>
    </nav>

    <main class="container-fluid mt-3">
        {% block content %}{% endblock %}
    </main>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    {% block scripts %}{% endblock %}
</body>

</html>
```

## templates/index.html
```html
{% extends "base.html" %}
{% block title %}首頁 - A4 Interactive Board{% endblock %}

{% block content %}
<div class="row">
    <div class="col-md-8">
        <div class="card">
            <div class="card-header">
                <h5><i class="fas fa-video"></i> 即時偵測</h5>
            </div>
            <div class="card-body text-center">
                <img id="video-stream" src="{{ url_for('video_feed') }}" class="img-fluid border rounded">
            </div>
        </div>
    </div>
    <div class="col-md-4">
        <div class="card">
            <div class="card-header">
                <h5><i class="fas fa-info-circle"></i> 偵測狀態</h5>
            </div>
            <div class="card-body">
                <div id="detection-status">
                    <div class="mb-2">
                        <span class="badge bg-secondary">棋盤: 未檢測</span>
                    </div>
                    <div class="mb-2">
                        <span class="badge bg-secondary">手部: 未檢測</span>
                    </div>
                    <div class="mb-2">
                        <span class="badge bg-secondary">ROI 觸碰: 0</span>
                    </div>
                </div>
            </div>
        </div>

        <div class="card mt-3">
            <div class="card-header">
                <h5><i class="fas fa-play"></i> 快速開始</h5>
            </div>
            <div class="card-body">
                <a href="{{ url_for('file_manager_page') }}" class="btn btn-primary btn-lg w-100 mb-2">
                    <i class="fas fa-folder"></i> 管理專案
                </a>
                <button class="btn btn-success btn-lg w-100" data-bs-toggle="modal" data-bs-target="#newProjectModal">
                    <i class="fas fa-plus"></i> 新增專案
                </button>
            </div>
        </div>
    </div>
</div>

<!-- 新增專案 Modal -->
<div class="modal fade" id="newProjectModal" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">新增專案</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <form id="newProjectForm">
                    <div class="mb-3">
                        <label class="form-label">專案名稱</label>
                        <input type="text" class="form-control" name="name" required>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">背景圖片 (選擇性)</label>
                        <input type="file" class="form-control" name="background" accept="image/*">
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">取消</button>
                <button type="button" class="btn btn-primary" onclick="createProject()">建立</button>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/main.js') }}"></script>
{% endblock %}
```

## templates/file_manager.html
```html
{% extends "base.html" %}
{% block title %}專案管理{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
    <h2><i class="fas fa-folder-open"></i> 專案管理</h2>
    <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#newProjectModal">
        <i class="fas fa-plus"></i> 新增專案
    </button>
</div>

<div class="row">
    {% for project in projects %}
    <div class="col-md-4 mb-4">
        <div class="card">
            {% if project.background_image %}
            <img src="{{ url_for('uploaded_file', filename=project.background_image) }}" class="card-img-top"
                style="height: 200px; object-fit: cover;">
            {% endif %}
            <div class="card-body">
                <h5 class="card-title">{{ project.name }}</h5>
                <p class="card-text text-muted">
                    <small>建立時間: {{ project.created_at[:10] }}</small><br>
                    <small>ROI 數量: {{ project.rois|length }}</small>
                </p>
                <div class="btn-group w-100" role="group">
                    <a href="{{ url_for('editor_page', project_name=project.folder_name) }}"
                        class="btn btn-outline-primary">
                        <i class="fas fa-edit"></i> 編輯
                    </a>
                    <a href="{{ url_for('play_page', project_name=project.folder_name) }}"
                        class="btn btn-outline-success">
                        <i class="fas fa-play"></i> 播放
                    </a>
                </div>
                <button class="btn btn-outline-danger btn-sm mt-2 w-100"
                    onclick="deleteProject('{{ project.folder_name }}')">
                    <i class="fas fa-trash"></i> 刪除
                </button>
            </div>
        </div>
    </div>
    {% endfor %}
</div>

{% if not projects %}
<div class="text-center py-5">
    <i class="fas fa-folder-open fa-5x text-muted mb-3"></i>
    <h4 class="text-muted">尚無專案</h4>
    <p class="text-muted">開始建立你的第一個互動專案吧！</p>
</div>
{% endif %}
{% endblock %}
```

## templates/editor.html
```html
{% extends "base.html" %}
{% block title %}編輯器 - {{ project.name }}{% endblock %}

{% block content %}
<div class="row">
    <div class="col-md-8">
        <div class="card">
            <div class="card-header d-flex justify-content-between">
                <h5><i class="fas fa-edit"></i> {{ project.name }} - 編輯器</h5>
                <div>
                    <button class="btn btn-success btn-sm" onclick="saveProject()">
                        <i class="fas fa-save"></i> 儲存
                    </button>
                    <button class="btn btn-info btn-sm" onclick="exportProject()">
                        <i class="fas fa-download"></i> 導出圖片
                    </button>
                    <a href="{{ url_for('play_page', project_name=project.folder_name) }}"
                        class="btn btn-primary btn-sm">
                        <i class="fas fa-play"></i> 測試播放
                    </a>
                </div>
            </div>
            <div class="card-body">
                <div class="canvas-container" style="position: relative; display: inline-block;">
                    <canvas id="editor-canvas" width="800" height="600"
                        style="border: 2px solid #ddd; cursor: crosshair;"></canvas>
                    {% if project.background_image %}
                    <img id="background-image" src="{{ url_for('uploaded_file', filename=project.background_image) }}"
                        style="display: none;">
                    {% endif %}
                </div>

                <div class="mt-3">
                    <div class="btn-group" role="group">
                        <input type="radio" class="btn-check" name="tool" id="select-tool" autocomplete="off" checked>
                        <label class="btn btn-outline-secondary" for="select-tool">
                            <i class="fas fa-mouse-pointer"></i> 選擇
                        </label>

                        <input type="radio" class="btn-check" name="tool" id="rectangle-tool" autocomplete="off">
                        <label class="btn btn-outline-primary" for="rectangle-tool">
                            <i class="fas fa-square"></i> 矩形
                        </label>

                        <input type="radio" class="btn-check" name="tool" id="circle-tool" autocomplete="off">
                        <label class="btn btn-outline-info" for="circle-tool">
                            <i class="fas fa-circle"></i> 圓形
                        </label>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="col-md-4">
        <div class="card">
            <div class="card-header">
                <h5><i class="fas fa-list"></i> ROI 列表</h5>
            </div>
            <div class="card-body">
                <div id="roi-list">
                    {% for roi in project.rois %}
                    <div class="roi-item border rounded p-2 mb-2" data-roi-id="{{ roi.id }}">
                        <div class="d-flex justify-content-between align-items-center">
                            <strong>{{ roi.name }}</strong>
                            <button class="btn btn-sm btn-outline-danger" onclick="deleteROI('{{ roi.id }}')">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                        <small class="text-muted">{{ roi.type }} | 位置: ({{ roi.x }}, {{ roi.y }})</small>
                        <div class="mt-1">
                            <input type="file" class="form-control form-control-sm" accept="audio/*"
                                onchange="uploadAudio('{{ roi.id }}', this)">
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>
        </div>

        <div class="card mt-3">
            <div class="card-header">
                <h5><i class="fas fa-cog"></i> 專案設定</h5>
            </div>
            <div class="card-body">
                <div class="mb-3">
                    <label class="form-label">專案名稱</label>
                    <input type="text" class="form-control" id="project-name" value="{{ project.name }}">
                </div>
                <div class="mb-3">
                    <label class="form-label">更換背景圖片</label>
                    <input type="file" class="form-control" accept="image/*" onchange="uploadBackground(this)">
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/editor.js') }}"></script>
{% endblock %}
```

## templates/play.html
```html
{% extends "base.html" %}
{% block title %}播放 - {{ project.name }}{% endblock %}

{% block content %}
<div class="row">
    <div class="col-md-8">
        <div class="card">
            <div class="card-header d-flex justify-content-between">
                <h5><i class="fas fa-play"></i> {{ project.name }} - 播放模式</h5>
                <div>
                    <a href="{{ url_for('editor_page', project_name=project.folder_name) }}"
                        class="btn btn-warning btn-sm">
                        <i class="fas fa-edit"></i> 返回編輯
                    </a>
                </div>
            </div>
            <div class="card-body text-center">
                <img id="video-stream" src="{{ url_for('video_feed') }}" class="img-fluid border rounded"
                    style="max-height: 500px;">
            </div>
        </div>
    </div>

    <div class="col-md-4">
        <div class="card">
            <div class="card-header">
                <h5><i class="fas fa-info-circle"></i> 偵測狀態</h5>
            </div>
            <div class="card-body">
                <div id="detection-status">
                    <div class="mb-2">
                        <span id="board-status" class="badge bg-secondary">棋盤: 未檢測</span>
                    </div>
                    <div class="mb-2">
                        <span id="hand-status" class="badge bg-secondary">手部: 未檢測</span>
                    </div>
                    <div class="mb-2">
                        <span id="touch-status" class="badge bg-secondary">ROI 觸碰: 0</span>
                    </div>
                </div>

                <hr>

                <div id="roi-touches">
                    <h6>當前觸碰的 ROI：</h6>
                    <div id="touch-list">
                        <!-- 動態更新 -->
                    </div>
                </div>
            </div>
        </div>

        <div class="card mt-3">
            <div class="card-header">
                <h5><i class="fas fa-volume-up"></i> 音效控制</h5>
            </div>
            <div class="card-body">
                <div class="mb-3">
                    <label class="form-label">音量</label>
                    <input type="range" class="form-range" id="volume-slider" min="0" max="100" value="50"
                        onchange="setVolume(this.value)">
                    <small class="text-muted">當前: <span id="volume-display">50</span>%</small>
                </div>
                <button class="btn btn-warning w-100" onclick="stopAllAudio()">
                    <i class="fas fa-stop"></i> 停止所有音效
                </button>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
    var projectROIs = [];
    try {
        projectROIs = JSON.parse('{{ (project.rois | tojson | safe) }}');
    } catch (e) {
        console.error('Failed to parse project ROIs:', e);
    }

    fetch('/api/load-project-rois', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ rois: projectROIs })
    });
</script>
<script src="{{ url_for('static', filename='js/play.js') }}"></script>
{% endblock %}